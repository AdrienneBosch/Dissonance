<Window x:Name="AlertMessageBox"
        x:Class="Dissonance.Windows.Controls.DissonanceMessageBox"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Dissonance.Windows.Controls"
        mc:Ignorable="d"
        Title="Alert"
        MinWidth="360"
        MaxWidth="520"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="None"
        ShowInTaskbar="False"
        Background="{DynamicResource WindowBackgroundBrush}"
        Foreground="{DynamicResource PrimaryForegroundBrush}"
        FontFamily="{DynamicResource BaseFontFamily}"
        SnapsToDevicePixels="True"
        AutomationProperties.Name="{Binding Title}"
        AutomationProperties.HelpText="Dissonance alert dialog">
    <Window.Resources>
        <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </Window.Resources>

    <Border Margin="24"
            Style="{StaticResource CardContainerStyle}"
            FocusManager.IsFocusScope="True"
            FocusManager.FocusedElement="{Binding ElementName=OkButton}"
            KeyboardNavigation.TabNavigation="Cycle"
            KeyboardNavigation.ControlTabNavigation="Cycle">
        <Border.Effect>
            <DropShadowEffect BlurRadius="18"
                              ShadowDepth="0"
                              Opacity="0.35"
                              Color="#99000000" />
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <StackPanel Orientation="Horizontal"
                        Grid.Row="0"
                        Margin="0,0,0,12">
                <Image Width="24"
                       Height="24"
                       Source="{Binding Icon}"
                       Margin="0,0,10,0" />
                <TextBlock Text="{Binding Title}"
                           Style="{StaticResource CardTitleTextStyle}" />
            </StackPanel>

            <TextBlock Grid.Row="1"
                       Text="{Binding Message}"
                       Style="{StaticResource CardDescriptionTextStyle}" />

            <StackPanel Grid.Row="2"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,20,0,0">
                <Button x:Name="OkButton"
                        Content="OK"
                        MinWidth="120"
                        Height="36"
                        Margin="0,0,8,0"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Command="{Binding OkCommand}"
                        ToolTip="Confirm and close this alert"
                        TabIndex="0"
                        IsDefault="True"
                        AutomationProperties.Name="Confirm alert"
                        AutomationProperties.HelpText="Confirms the alert and closes the dialog" />
                <Button x:Name="CancelButton"
                        Content="Cancel"
                        MinWidth="120"
                        Height="36"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Command="{Binding CancelCommand}"
                        Visibility="{Binding ShowCancelButton, Converter={StaticResource BoolToVisibilityConverter}}"
                        Background="{DynamicResource CardBorderBrush}"
                        Foreground="{DynamicResource PrimaryForegroundBrush}"
                        ToolTip="Cancel and close this alert"
                        TabIndex="1"
                        IsCancel="True"
                        AutomationProperties.Name="Cancel alert"
                        AutomationProperties.HelpText="Cancels the action and closes the dialog" />
            </StackPanel>
        </Grid>
    </Border>
</Window>
